# プロンプトエンジニアリング概要

<Note>
  While these tips apply broadly to all Claude models, you can find prompting tips specific to extended thinking models [here](/en/docs/build-with-claude/prompt-engineering/extended-thinking-tips).
</Note>

## プロンプトエンジニアリングを始める前に

このガイドでは、以下のことを前提としています：

1. あなたのユースケースの成功基準の明確な定義
2. それらの基準に対して実証的にテストする方法
3. 改善したい最初のドラフトプロンプト

もしこれらがない場合は、まずそれらを確立することに時間を費やすことを強くお勧めします。ヒントとガイダンスについては、[成功基準を定義する](/ja/docs/test-and-evaluate/define-success)と[強力な実証的評価を作成する](/ja/docs/test-and-evaluate/develop-tests)をご確認ください。

<Card title="プロンプトジェネレーター" icon="link" href="https://console.anthropic.com/dashboard">
  最初のドラフトプロンプトがありませんか？Claude Consoleのプロンプトジェネレーターをお試しください！
</Card>

***

## プロンプトエンジニアリングを行うタイミング

このガイドは、プロンプトエンジニアリングによって制御可能な成功基準に焦点を当てています。
すべての成功基準や失敗した評価がプロンプトエンジニアリングで最適に解決されるわけではありません。例えば、レイテンシーとコストは、異なるモデルを選択することでより簡単に改善できる場合があります。

<Accordion title="プロンプティング vs. ファインチューニング">
  プロンプトエンジニアリングは、ファインチューニングなどの他のモデル行動制御方法よりもはるかに高速で、しばしばはるかに短時間でパフォーマンスの飛躍的向上をもたらすことができます。ファインチューニングよりもプロンプトエンジニアリングを検討する理由をいくつか挙げます：<br />

  * **リソース効率**: ファインチューニングには高性能GPUと大容量メモリが必要ですが、プロンプトエンジニアリングはテキスト入力のみで済むため、はるかにリソースに優しいです。
  * **コスト効率**: クラウドベースのAIサービスでは、ファインチューニングには大きなコストがかかります。プロンプトエンジニアリングは基本モデルを使用するため、通常より安価です。
  * **モデル更新の維持**: プロバイダーがモデルを更新する際、ファインチューニングされたバージョンは再トレーニングが必要になる場合があります。プロンプトは通常、変更なしでバージョン間で動作します。
  * **時間節約**: ファインチューニングには数時間から数日かかることがあります。対照的に、プロンプトエンジニアリングはほぼ瞬時に結果を提供し、迅速な問題解決を可能にします。
  * **最小限のデータ要件**: ファインチューニングには大量のタスク固有のラベル付きデータが必要で、これは希少または高価な場合があります。プロンプトエンジニアリングは少数ショットまたはゼロショット学習でも動作します。
  * **柔軟性と迅速な反復**: さまざまなアプローチを素早く試し、プロンプトを調整し、即座に結果を確認できます。この迅速な実験はファインチューニングでは困難です。
  * **ドメイン適応**: プロンプトでドメイン固有のコンテキストを提供することで、再トレーニングなしでモデルを新しいドメインに簡単に適応させることができます。
  * **理解の改善**: プロンプトエンジニアリングは、検索された文書などの外部コンテンツをモデルがより良く理解し活用するのを助ける点で、ファインチューニングよりもはるかに効果的です。
  * **一般知識の保持**: ファインチューニングは破滅的忘却のリスクがあり、モデルが一般知識を失う可能性があります。プロンプトエンジニアリングはモデルの幅広い能力を維持します。
  * **透明性**: プロンプトは人間が読めるため、モデルが受け取る情報を正確に示します。この透明性は理解とデバッグに役立ちます。
</Accordion>

***

## プロンプトエンジニアリングの方法

このセクションのプロンプトエンジニアリングページは、最も広く効果的な技術から、より専門的な技術まで整理されています。パフォーマンスのトラブルシューティングを行う際は、これらの技術を順番に試すことをお勧めしますが、各技術の実際の影響はあなたのユースケースによって異なります。

1. [プロンプトジェネレーター](/ja/docs/build-with-claude/prompt-engineering/prompt-generator)
2. [明確で直接的であること](/ja/docs/build-with-claude/prompt-engineering/be-clear-and-direct)
3. [例を使用する（マルチショット）](/ja/docs/build-with-claude/prompt-engineering/multishot-prompting)
4. [Claudeに考えさせる（思考の連鎖）](/ja/docs/build-with-claude/prompt-engineering/chain-of-thought)
5. [XMLタグを使用する](/ja/docs/build-with-claude/prompt-engineering/use-xml-tags)
6. [Claudeに役割を与える（システムプロンプト）](/ja/docs/build-with-claude/prompt-engineering/system-prompts)
7. [Claudeの応答を事前入力する](/ja/docs/build-with-claude/prompt-engineering/prefill-claudes-response)
8. [複雑なプロンプトを連鎖させる](/ja/docs/build-with-claude/prompt-engineering/chain-prompts)
9. [長いコンテキストのヒント](/ja/docs/build-with-claude/prompt-engineering/long-context-tips)

***

## プロンプトエンジニアリングチュートリアル

インタラクティブな学習者の方は、代わりに私たちのインタラクティブチュートリアルに飛び込むことができます！

<CardGroup cols={2}>
  <Card title="GitHubプロンプティングチュートリアル" icon="link" href="https://github.com/anthropics/prompt-eng-interactive-tutorial">
    私たちのドキュメントにあるプロンプトエンジニアリングの概念をカバーする例が豊富なチュートリアル。
  </Card>

  <Card title="Google Sheetsプロンプティングチュートリアル" icon="link" href="https://docs.google.com/spreadsheets/d/19jzLgRruG9kjUQNKtCg1ZjdD6l6weA6qRXG5zLIAhC8">
    インタラクティブなスプレッドシートを通じた、私たちのプロンプトエンジニアリングチュートリアルの軽量版。
  </Card>
</CardGroup>

# Claude 4プロンプトエンジニアリングのベストプラクティス

このガイドでは、Claude 4モデル（Opus 4.1、Opus 4、Sonnet 4）向けの具体的なプロンプトエンジニアリング技術を提供し、アプリケーションで最適な結果を得るのに役立ちます。これらのモデルは、以前の世代のClaudeモデルよりも正確な指示に従うように訓練されています。

## 一般的な原則

### 指示を明確にする

Claude 4モデルは、明確で具体的な指示によく反応します。望ましい出力について具体的に説明することで、結果を向上させることができます。以前のClaudeモデルの「期待を上回る」動作を望む顧客は、Claude 4ではこれらの動作をより明示的に要求する必要があるかもしれません。

<Accordion title="例：分析ダッシュボードの作成">
  **効果的でない例：**

  ```text
  分析ダッシュボードを作成してください
  ```

  **より効果的な例：**

  ```text
  分析ダッシュボードを作成してください。可能な限り多くの関連機能とインタラクションを含めてください。基本を超えて、完全に機能する実装を作成してください。
  ```
</Accordion>

### パフォーマンスを向上させるためにコンテキストを追加する

指示の背景や動機を提供すること、例えばClaudeにそのような動作がなぜ重要なのかを説明することで、Claude 4モデルがあなたの目標をよりよく理解し、より的確な回答を提供するのに役立ちます。

<Accordion title="例：フォーマットの設定">
  **効果的でない例：**

  ```text
  省略記号は絶対に使わないでください
  ```

  **より効果的な例：**

  ```text
  あなたの回答はテキスト読み上げエンジンによって音読されるため、テキスト読み上げエンジンが発音方法を知らない省略記号は絶対に使わないでください。
  ```
</Accordion>

Claudeは説明から一般化するのに十分賢いです。

### 例と詳細に注意を払う

Claude 4モデルは、指示に従う一環として詳細と例に注意を払います。あなたの例が奨励したい動作と一致し、避けたい動作を最小限に抑えるようにしてください。

## 特定の状況に対するガイダンス

### 回答の形式を制御する

Claude 4モデルで出力フォーマットを操作するのに特に効果的であることがわかったいくつかの方法があります：

1. **何をしないかではなく、何をするかをClaudeに伝える**

   * 代わりに：「回答でマークダウンを使わないでください」
   * 試してみる：「あなたの回答は滑らかに流れる散文の段落で構成されるべきです。」

2. **XML形式インジケーターを使用する**

   * 試してみる：「回答の散文セクションを\<smoothly\_flowing\_prose\_paragraphs>タグで書いてください。」

3. **プロンプトスタイルを望ましい出力に合わせる**

   プロンプトで使用されるフォーマットスタイルは、Claudeの回答スタイルに影響を与える可能性があります。出力フォーマットの操作性の問題が依然として発生している場合は、可能な限りプロンプトスタイルを望ましい出力スタイルに合わせることをお勧めします。例えば、プロンプトからマークダウンを削除すると、出力のマークダウンの量を減らすことができます。

### 思考と交互思考機能を活用する

Claude 4は、ツール使用後の反省や複雑な多段階推論を含むタスクに特に役立つ思考機能を提供します。より良い結果を得るために、初期または交互思考を導くことができます。

```text プロンプト例
ツール結果を受け取った後、その品質を慎重に反省し、進行する前に最適な次のステップを決定してください。この新しい情報に基づいて計画し反復するために思考を使用し、その後最良の次のアクションを取ってください。
```

<Info>
  思考機能の詳細については、[拡張思考](/ja/docs/build-with-claude/extended-thinking)を参照してください。
</Info>

### 並列ツール呼び出しを最適化する

Claude 4モデルは並列ツール実行に優れています。プロンプトなしでも並列ツール呼び出しを使用する成功率が高いですが、少しのプロンプトでこの動作を〜100%の並列ツール使用成功率まで押し上げることができます。このプロンプトが最も効果的であることがわかりました：

```text エージェント用サンプルプロンプト
最大効率のために、複数の独立した操作を実行する必要がある場合は、順次ではなく同時にすべての関連ツールを呼び出してください。
```

### エージェンティックコーディングでのファイル作成を減らす

Claude 4モデルは、特にコードを扱う際に、テストと反復の目的で新しいファイルを作成することがあります。このアプローチにより、Claudeは最終出力を保存する前に、ファイル、特にpythonスクリプトを「一時的なスクラッチパッド」として使用できます。一時ファイルの使用は、特にエージェンティックコーディングの使用例で結果を改善できます。

新しいファイル作成を最小限に抑えたい場合は、Claudeに後片付けをするよう指示できます：

```text サンプルプロンプト
反復のために一時的な新しいファイル、スクリプト、またはヘルパーファイルを作成した場合は、タスクの最後にこれらのファイルを削除してクリーンアップしてください。
```

### ビジュアルとフロントエンドコード生成を向上させる

フロントエンドコード生成では、明示的な奨励を提供することで、Claude 4モデルに複雑で詳細でインタラクティブなデザインを作成するよう導くことができます：

```text サンプルプロンプト
遠慮しないでください。全力を尽くしてください。
```

また、焦点を当てるべき内容について追加の修飾子と詳細を提供することで、特定の領域でのClaudeのフロントエンドパフォーマンスを向上させることもできます：

* 「可能な限り多くの関連機能とインタラクションを含める」
* 「ホバー状態、トランジション、マイクロインタラクションなどの思慮深い詳細を追加する」
* 「ウェブ開発能力を示す印象的なデモンストレーションを作成する」
* 「デザイン原則を適用する：階層、コントラスト、バランス、動き」

### テスト合格と硬直的なコーディングに焦点を当てることを避ける

最先端の言語モデルは、より一般的なソリューションを犠牲にして、テストを合格させることに過度に焦点を当てることがあります。この動作を防ぎ、堅牢で一般化可能なソリューションを確保するために：

```text サンプルプロンプト
高品質で汎用的なソリューションを書いてください。テストケースだけでなく、すべての有効な入力に対して正しく動作するソリューションを実装してください。値をハードコードしたり、特定のテスト入力に対してのみ動作するソリューションを作成したりしないでください。代わりに、問題を一般的に解決する実際のロジックを実装してください。

問題要件を理解し、正しいアルゴリズムを実装することに焦点を当ててください。テストは正確性を検証するためのものであり、ソリューションを定義するためのものではありません。ベストプラクティスとソフトウェア設計原則に従った原則的な実装を提供してください。

タスクが不合理または実行不可能な場合、またはテストのいずれかが間違っている場合は、教えてください。ソリューションは堅牢で保守可能で拡張可能であるべきです。
```

## 移行に関する考慮事項

Sonnet 3.7からClaude 4に移行する際：

1. **望ましい動作について具体的に説明する**：出力で見たいものを正確に説明することを検討してください。

2. **修飾子で指示をフレーム化する**：Claudeに出力の品質と詳細を向上させることを奨励する修飾子を追加することで、Claudeのパフォーマンスをより良く形作ることができます。例えば、「分析ダッシュボードを作成してください」の代わりに、「分析ダッシュボードを作成してください。可能な限り多くの関連機能とインタラクションを含めてください。基本を超えて、完全に機能する実装を作成してください。」を使用してください。

3. **特定の機能を明示的に要求する**：アニメーションとインタラクティブ要素は、望ましい場合は明示的に要求する必要があります。

# プロンプトテンプレートの初稿を自動生成

<Note>
  プロンプトジェネレーターは、拡張思考機能を備えたモデルを含む、すべての Claude モデルと互換性があります。拡張思考モデル向けのプロンプトのヒントについては、[こちら](/ja/docs/build-with-claude/extended-thinking)をご覧ください。
</Note>

AIモデルを使用する際の最も難しい部分の1つは、効果的なプロンプトの作り方を見つけることです。これを支援するため、私たちは特定のタスクに合わせた高品質なプロンプトテンプレートを生成するようClaudeをガイドするプロンプト生成ツールを作成しました。これらのテンプレートは、私たちのプロンプトエンジニアリングのベストプラクティスの多くに従っています。

プロンプトジェネレーターは、「白紙の問題」を解決するためのツールとして特に有用で、さらなるテストと改善のための出発点を提供します。

<Tip>[Console](https://console.anthropic.com/dashboard)で今すぐプロンプトジェネレーターを試してみてください。</Tip>

基礎となるプロンプトとアーキテクチャを分析することに興味がある場合は、[プロンプトジェネレーターのGoogle Colabノートブック](https://anthropic.com/metaprompt-notebook/)をご確認ください。そこでは、Claudeにプロンプトを作成させるコードを簡単に実行できます。

<Note>Colabノートブックを実行するには、[APIキー](https://console.anthropic.com/settings/keys)が必要です。</Note>

***

## 次のステップ

<CardGroup cols={2}>
  <Card title="プロンプトエンジニアリングを始める" icon="link" href="/ja/docs/build-with-claude/prompt-engineering/be-clear-and-direct">
    様々なタスクやユースケースに対するプロンプトの選定例からインスピレーションを得ましょう。
  </Card>

  <Card title="プロンプトライブラリ" icon="link" href="/ja/prompt-library/library">
    様々なタスクやユースケースに対するプロンプトの選定例からインスピレーションを得ましょう。
  </Card>

  <Card title="GitHubプロンプトチュートリアル" icon="link" href="https://github.com/anthropics/prompt-eng-interactive-tutorial">
    ドキュメントに記載されているプロンプトエンジニアリングの概念を網羅した、例題が豊富なチュートリアルです。
  </Card>

  <Card title="Google Sheetsプロンプトチュートリアル" icon="link" href="https://docs.google.com/spreadsheets/d/19jzLgRruG9kjUQNKtCg1ZjdD6l6weA6qRXG5zLIAhC8">
    インタラクティブなスプレッドシートを通じた、より軽量版のプロンプトエンジニアリングチュートリアルです。
  </Card>
</CardGroup>

# 明確で直接的で詳細な指示を出す

<Note>
  While these tips apply broadly to all Claude models, you can find prompting tips specific to extended thinking models [here](/en/docs/build-with-claude/prompt-engineering/extended-thinking-tips).
</Note>

Claudeとやり取りする際は、明確な指示が必要な、優秀だが非常に新しい（記憶喪失の）従業員のように考えてください。新入社員と同様に、Claudeはあなたの規範、スタイル、ガイドライン、好みの作業方法についての文脈を持っていません。
より正確に要望を説明すれば、それだけClaudeの応答も良くなります。

<Tip>**明確なプロンプトの黄金律**<br />同僚（できればタスクについて最小限の文脈しか持っていない人）にプロンプトを見せて、指示に従ってもらいましょう。彼らが混乱するようであれば、Claudeも同様に混乱する可能性が高いです。</Tip>

## 明確で文脈に即した具体的な指示の出し方

* **Claudeに文脈情報を与える：** タスクについてより多くの文脈を知ることでより良いパフォーマンスを発揮できるように、Claudeもより多くの文脈情報があればより良いパフォーマンスを発揮します。文脈情報の例：
  * タスクの結果がどのように使用されるか
  * 出力が想定している対象読者
  * タスクがどのようなワークフローの一部であり、そのワークフローの中でこのタスクがどこに位置するか
  * タスクの最終目標、または成功したタスクの完了がどのようなものか
* **Claudeに何をしてほしいかを具体的に示す：** 例えば、Claudeにコードのみを出力させて他は何も出力させたくない場合は、そう明示します。
* **手順を順序立てて提供する：** 番号付きリストや箇条書きを使用して、Claudeが正確にあなたの望む方法でタスクを実行するようにします。

### 例

<AccordionGroup>
  <Accordion title="例：顧客フィードバックの匿名化">
    不明確なプロンプトの例では、Claudeは顧客の名前を残すなどのミスをまだ犯していることに注意してください。

    | 役割                | 不明確なプロンプト                                                                                                                                                                                                                                                                   | 明確なプロンプト                                                                                                                                                                                                                                                                                                                                                                    |
    | ----------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
    | ユーザー              | これらの顧客フィードバックメッセージから個人を特定できる情報をすべて削除してください：\{\{FEEDBACK\_DATA}}                                                                                                                                                                                                             | タスク：四半期レビュー用に顧客フィードバックを匿名化する。<br /><br />手順：<br />1. すべての顧客名を"CUSTOMER\_\[ID]"に置き換える（例："Jane Doe" → "CUSTOMER\_001"）<br />2. メールアドレスを"EMAIL\_\[ID]@example.com"に置き換える<br />3. 電話番号を"PHONE\_\[ID]"として編集する<br />4. 特定の製品への言及（例："AcmeCloud"）はそのまま残す<br />5. 個人情報が見つからない場合は、メッセージをそのままコピーする<br />6. 処理されたメッセージのみを出力し、"---"で区切る<br /><br />処理するデータ：\{\{FEEDBACK\_DATA}}          |
    | アシスタント（Claudeの応答） | 匿名化された顧客フィードバックメッセージは以下の通りです：<br />1. 長年あなたのソフトウェアを使用してきましたが、素晴らしかったです。しかし最近、AcmeCloudがよくクラッシュします。修正してください！<br />2. XXX、あなたのカスタマーサポート担当者は非常に役に立ちました。プロセス全体を案内してくれました。アンケートを送りたい場合は、私のメールはXXXです。<br />3. 私はJohn Smithですが、満足していません。XXXの誰かと連絡を取ろうとして2時間も待たされています。これは受け入れられません！ | CUSTOMER\_001：長年あなたのソフトウェアを使用してきましたが、素晴らしかったです。しかし最近、AcmeCloudがよくクラッシュします。修正してください！<br />---<br />CUSTOMER\_002：CUSTOMER\_SERVICE\_001、あなたのカスタマーサポート担当者は非常に役に立ちました。プロセス全体を案内してくれました。アンケートを送りたい場合は、私のメールは[EMAIL\_002@example.com](mailto:EMAIL_002@example.com)です。<br />---<br />CUSTOMER\_003：私はCUSTOMER\_003ですが、満足していません。PHONE\_001の誰かと連絡を取ろうとして2時間も待たされています。これは受け入れられません！ |
  </Accordion>

  <Accordion title="例：マーケティングメールキャンペーンの作成">
    曖昧なプロンプトでは、Claudeは文脈が不足している部分を埋めるために詳細を作り出していることに注意してください。

    | 役割                | 曖昧なプロンプト                                                                                                                                                                                                                                                                                                                                                                                                | 具体的なプロンプト                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
    | ----------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
    | ユーザー              | 新しいAcmeCloud機能のマーケティングメールを書いてください。                                                                                                                                                                                                                                                                                                                                                                      | タスク：第3四半期のAcmeCloud機能リリースのための的を絞ったマーケティングメールを作成する。<br /><br />手順：<br />1. ターゲット層：オンプレミスからクラウドへの移行を検討している中規模テクノロジー企業（従業員100-500人）<br />2. 3つの主要な新機能を強調：高度なデータ暗号化、クロスプラットフォーム同期、リアルタイムコラボレーション<br />3. トーン：プロフェッショナルかつ親しみやすい。セキュリティ、効率性、チームワークを強調<br />4. 明確なCTA：優先オンボーディング付きの30日間無料トライアル<br />5. 件名：50文字以内で、「セキュリティ」と「コラボレーション」に言及<br />6. パーソナライズ：\{\{COMPANY\_NAME}}と\{\{CONTACT\_NAME}}変数を使用<br /><br />構成：<br />1. 件名<br />2. メール本文（150-200語）<br />3. CTAボタンテキスト                                                                                                                                                                                                                                         |
    | アシスタント（Claudeの応答） | 新機能のマーケティングメールの下書きです：<br /><br />件名：AcmeCloudの最新機能でビジネスを加速<br /><br />お客様各位<br /><br />AcmeCloudに3つの強力な機能を導入し、あなたのワークフローを革新します：<br /><br />1. リアルタイムコラボレーション：チームと同時にドキュメントを作業。バージョン管理の問題はもう起きません！<br />2. AI駆動のインサイト：トレンドを分析しタスクを自動化するAIで、データ駆動の意思決定を。<br />3. 高度なセキュリティスイート：エンドツーエンドの暗号化、多要素認証、脅威検出であなたのデータを安全に。<br /><br />期間限定オファー：今すぐアップグレードで初年度20%割引。友達紹介で追加10%オフ！<br /><br />敬具<br />AcmeCloudチーム | 件名：AcmeCloud：エンタープライズセキュリティとリアルタイムチームワークの融合<br /><br />メール本文：<br />拝啓 \{\{CONTACT\_NAME}}様<br /><br />\{\{COMPANY\_NAME}}では、急速な成長とクラウドへの移行をお考えのことと存じます。しかし成長に伴い、データのセキュリティを確保しながらコラボレーションを促進するという課題が生じます。そこで、あなたのような技術革新企業のために特別に設計されたAcmeCloudの第3四半期リリースをご紹介します。<br /><br />1. あなたのファイルのフォートノックス：軍事級の暗号化で、移動中も保管中もデータを保護。知的財産は確実にあなたのものです。<br />2. 境界のない同期：Windows、Mac、Linux - AcmeCloudはすべての言語に対応。統一されたバージョン管理で"final\_v2\_REALLY\_FINAL.doc"とはおさらばです。<br />3. 光速のコラボレーション：添付ファイルのピンポンは終わり。開発者、デザイナー、データサイエンティストがリアルタイムで共同作業を行い、市場投入までの時間を大幅に短縮。<br /><br />私たちの言葉を信じる必要はありません。30日間のトライアルでAcmeCloudの違いを体験してください。そして時間があなたの最も貴重な資産であることを理解しているからこそ、優先オンボーディングを無料で提供します。<br /><br />今すぐチームを強化 - 30日間無料トライアル |
  </Accordion>

  <Accordion title="例：インシデント対応">
    曖昧なプロンプトでは、Claudeが余分なテキストと異なる形式で出力していることに注意してください。

    | 役割                | 曖昧なプロンプト                                                                                                                                                                                                                                                                                                                    | 詳細なプロンプト                                                                                                                                                                                             |
    | ----------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
    | ユーザー              | このAcmeCloudの障害レポートを分析し、重要なポイントを要約してください。<br /><br />\{\{REPORT}}                                                                                                                                                                                                                                                            | このAcmeCloudの障害レポートを分析してください。前置きは省略してください。簡潔な応答のみとし、必要最小限の情報のみを記載してください。以下のみをリストアップ：<br />1) 原因<br />2) 期間<br />3) 影響を受けたサービス<br />4) 影響を受けたユーザー数<br />5) 推定収益損失<br /><br />レポートは以下の通りです：\{\{REPORT}} |
    | アシスタント（Claudeの応答） | AcmeCloud障害レポートの重要なポイントの要約は以下の通りです：<br /><br />5月15日、ロードバランサーの更新の設定ミスにより、重大なトラフィックルーティングの問題が発生し、09:15から13:52 UTCまでのサービス停止が発生しました。4時間37分の中断により、コアファイル同期サービスと管理ダッシュボードが影響を受け、アクセス不能となりました。さらに、モバイルアプリは部分的な機能喪失を経験しました。ユーザーベースの約68%、合計130万人のユーザーが影響を受けました。サービスレベル契約（SLA）と平均ユーザー収益に基づき、サービスクレジットと潜在的な顧客離れによる財務的影響は42万ドルと推定されます。 | 1) 原因：ロードバランサーの更新の設定ミス<br />2) 期間：4時間37分（5月15日 09:15-13:52 UTC）<br />3) 影響：コア同期、管理ダッシュボード（停止）；モバイルアプリ（部分的）<br />4) 影響を受けたユーザー：130万人（ベースの68%）<br />5) 推定収益損失：42万ドル                                    |
  </Accordion>
</AccordionGroup>

***

<CardGroup cols={3}>
  <Card title="プロンプトライブラリ" icon="link" href="/ja/prompt-library/library">
    様々なタスクやユースケースのための厳選されたプロンプトで着想を得ましょう。
  </Card>

  <Card title="GitHubプロンプト作成チュートリアル" icon="link" href="https://github.com/anthropics/prompt-eng-interactive-tutorial">
    私たちのドキュメントに記載されているプロンプトエンジニアリングの概念をカバーする、例が豊富なチュートリアル。
  </Card>

  <Card title="Google Sheetsプロンプト作成チュートリアル" icon="link" href="https://docs.google.com/spreadsheets/d/19jzLgRruG9kjUQNKtCg1ZjdD6l6weA6qRXG5zLIAhC8">
    インタラクティブなスプレッドシートを通じた、より軽量版のプロンプトエンジニアリングチュートリアル。
  </Card>
</CardGroup>

# 例（マルチショットプロンプト）を使用してClaudeの動作を導く

> 例を使用してClaudeの出力を正確に制御する方法を学びます。

<Note>
  While these tips apply broadly to all Claude models, you can find prompting tips specific to extended thinking models [here](/en/docs/build-with-claude/prompt-engineering/extended-thinking-tips).
</Note>

例は、Claudeに必要な出力を正確に生成させるための秘密の武器です。プロンプトに適切に作成された例をいくつか提供することで、Claudeの出力の正確性、一貫性、品質を劇的に向上させることができます。
フューショットまたはマルチショットプロンプトとして知られるこの手法は、構造化された出力や特定のフォーマットへの準拠が必要なタスクに特に効果的です。

<Tip>**プロンプトを強化する**: 求める内容を正確にClaudeに示すため、3〜5個の多様で関連性のある例を含めましょう。例が多いほど、特に複雑なタスクでのパフォーマンスが向上します。</Tip>

## なぜ例を使用するのか？

* **正確性**: 例を使用することで指示の誤解を減らせます。
* **一貫性**: 例により均一な構造とスタイルを強制できます。
* **パフォーマンス**: 適切に選択された例により、複雑なタスクを処理するClaudeの能力が向上します。

## 効果的な例の作成

最大の効果を得るために、例が以下の条件を満たすようにしてください：

* **関連性**: 例が実際のユースケースを反映している。
* **多様性**: 例がエッジケースや潜在的な課題をカバーし、Claudeが意図しないパターンを誤って学習しないよう十分に多様である。
* **明確性**: 例が構造化のために`<example>`タグ（複数の場合は`<examples>`タグ内にネスト）で囲まれている。

<Tip>例の関連性、多様性、明確性についてClaudeに評価を依頼したり、初期セットに基づいて追加の例を生成するようClaudeに依頼したりすることができます。</Tip>

<Accordion title="例：カスタマーフィードバックの分析">
  「例なし」のバージョンでは、Claudeは文章による分析で特定のフィードバックに複数のカテゴリがあることを示しているにもかかわらず、各カテゴリに複数のオプションを列挙していないことに注目してください。また、不要な場合でも長い説明を含めています。

  | 役割                | 例なし                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 例あり                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
  | ----------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
  | ユーザー              | このカスタマーフィードバックを分析し、問題を分類してください。以下のカテゴリを使用してください：UI/UX、パフォーマンス、機能リクエスト、インテグレーション、価格設定、その他。また、感情（ポジティブ/ニュートラル/ネガティブ）と優先度（高/中/低）も評価してください。<br /><br />フィードバック内容：\{\{FEEDBACK}}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | カスタマーサポートチームが非構造化フィードバックで手一杯です。製品開発チームとエンジニアリングチーム向けにフィードバックを分析し、問題を分類する必要があります。以下のカテゴリを使用してください：UI/UX、パフォーマンス、機能リクエスト、インテグレーション、価格設定、その他。また、感情（ポジティブ/ニュートラル/ネガティブ）と優先度（高/中/低）も評価してください。以下は例です：<br /><br />\<example><br />入力：新しいダッシュボードはめちゃくちゃです！読み込みに時間がかかりすぎるし、エクスポートボタンが見つかりません。至急修正してください！<br />カテゴリ：UI/UX、パフォーマンス<br />感情：ネガティブ<br />優先度：高\</example><br /><br />では、このフィードバックを分析してください：\{\{FEEDBACK}}                                                                                                                                                                                                                           |
  | アシスタント（Claudeの応答） | カスタマーフィードバックの分析結果：<br /><br />問題：UI/UX<br />感情：ネガティブ<br />優先度：高<br />顧客は新しいダッシュボードのデザインに不満を感じており、散らかっていて読み込みが遅いと感じています。特に「エクスポート」ボタンが見つからないことを指摘しており、これは重要な機能である可能性が高いです。この問題は高優先度で対応する必要があります。<br /><br />問題：インテグレーション<br />感情：ポジティブ<br />優先度：中<br />顧客は既存のSalesforceインテグレーションに満足していますが、Hubspotのサポートも追加してほしいと考えています。これは将来の製品アップデートで検討できる機能リクエストです。<br /><br />問題：価格設定<br />感情：ネガティブ<br />優先度：高<br />顧客は基本機能に対する価格設定が不当だと感じています。競合他社に乗り換えると脅しているため、これは高優先度で見直す必要がある問題です。<br /><br />問題：パフォーマンス<br />感情：ネガティブ<br />優先度：高<br />顧客はモバイルアプリで重大な問題を経験しており、大きなファイルのアップロード時に常にクラッシュしています。これは顧客の製品使用に重大な影響を与える問題であり、高優先度で対応する必要があります。<br /><br />問題：UI/UX<br />感情：ポジティブ<br />優先度：低<br />顧客は全体的に製品に満足しており、特に直感的なUIと優れたカスタマーサポートを評価しています。これは即座の対応を必要としないポジティブなフィードバックです。 | カスタマーフィードバックの分析結果：<br /><br />1. 新しいダッシュボードはめちゃくちゃです！読み込みに時間がかかりすぎるし、エクスポートボタンが見つかりません。至急修正してください！<br />カテゴリ：UI/UX、パフォーマンス<br />感情：ネガティブ<br />優先度：高<br /><br />2. Salesforceインテグレーションは素晴らしいです！でもHubspotも追加してくれたら嬉しいです。<br />カテゴリ：インテグレーション、機能リクエスト<br />感情：ポジティブ<br />優先度：中<br /><br />3. 価格設定がおかしいです！基本機能に月額99ドル？競合他社Xに乗り換えます。<br />カテゴリ：価格設定<br />感情：ネガティブ<br />優先度：高<br /><br />4. モバイルアプリで大きなファイル（50MB以上）をアップロードしようとするとクラッシュします。これは現場のエージェントにとって重要な問題です。<br />カテゴリ：パフォーマンス<br />感情：ネガティブ<br />優先度：高<br /><br />5. 全体的に製品に満足しています。UIは直感的で、カスタマーサポートは最高レベルです。この調子で頑張ってください！<br />カテゴリ：UI/UX、その他（カスタマーサポート）<br />感情：ポジティブ<br />優先度：低 |
</Accordion>

***

<CardGroup cols={3}>
  <Card title="プロンプトライブラリ" icon="link" href="/ja/prompt-library/library">
    様々なタスクやユースケース向けの厳選されたプロンプトで着想を得ましょう。
  </Card>

  <Card title="GitHubプロンプトチュートリアル" icon="link" href="https://github.com/anthropics/prompt-eng-interactive-tutorial">
    ドキュメントに記載されているプロンプトエンジニアリングの概念をカバーする、例が豊富なチュートリアルです。
  </Card>

  <Card title="Google Sheetsプロンプトチュートリアル" icon="link" href="https://docs.google.com/spreadsheets/d/19jzLgRruG9kjUQNKtCg1ZjdD6l6weA6qRXG5zLIAhC8">
    インタラクティブなスプレッドシートを通じた、より軽量版のプロンプトエンジニアリングチュートリアルです。
  </Card>
</CardGroup>

# 例（マルチショットプロンプト）を使用してClaudeの動作を導く

> 例を使用してClaudeの出力を正確に制御する方法を学びます。

<Note>
  While these tips apply broadly to all Claude models, you can find prompting tips specific to extended thinking models [here](/en/docs/build-with-claude/prompt-engineering/extended-thinking-tips).
</Note>

例は、Claudeに必要な出力を正確に生成させるための秘密の武器です。プロンプトに適切に作成された例をいくつか提供することで、Claudeの出力の正確性、一貫性、品質を劇的に向上させることができます。
フューショットまたはマルチショットプロンプトとして知られるこの手法は、構造化された出力や特定のフォーマットへの準拠が必要なタスクに特に効果的です。

<Tip>**プロンプトを強化する**: 求める内容を正確にClaudeに示すため、3〜5個の多様で関連性のある例を含めましょう。例が多いほど、特に複雑なタスクでのパフォーマンスが向上します。</Tip>

## なぜ例を使用するのか？

* **正確性**: 例を使用することで指示の誤解を減らせます。
* **一貫性**: 例により均一な構造とスタイルを強制できます。
* **パフォーマンス**: 適切に選択された例により、複雑なタスクを処理するClaudeの能力が向上します。

## 効果的な例の作成

最大の効果を得るために、例が以下の条件を満たすようにしてください：

* **関連性**: 例が実際のユースケースを反映している。
* **多様性**: 例がエッジケースや潜在的な課題をカバーし、Claudeが意図しないパターンを誤って学習しないよう十分に多様である。
* **明確性**: 例が構造化のために`<example>`タグ（複数の場合は`<examples>`タグ内にネスト）で囲まれている。

<Tip>例の関連性、多様性、明確性についてClaudeに評価を依頼したり、初期セットに基づいて追加の例を生成するようClaudeに依頼したりすることができます。</Tip>

<Accordion title="例：カスタマーフィードバックの分析">
  「例なし」のバージョンでは、Claudeは文章による分析で特定のフィードバックに複数のカテゴリがあることを示しているにもかかわらず、各カテゴリに複数のオプションを列挙していないことに注目してください。また、不要な場合でも長い説明を含めています。

  | 役割                | 例なし                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | 例あり                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
  | ----------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
  | ユーザー              | このカスタマーフィードバックを分析し、問題を分類してください。以下のカテゴリを使用してください：UI/UX、パフォーマンス、機能リクエスト、インテグレーション、価格設定、その他。また、感情（ポジティブ/ニュートラル/ネガティブ）と優先度（高/中/低）も評価してください。<br /><br />フィードバック内容：\{\{FEEDBACK}}                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    | カスタマーサポートチームが非構造化フィードバックで手一杯です。製品開発チームとエンジニアリングチーム向けにフィードバックを分析し、問題を分類する必要があります。以下のカテゴリを使用してください：UI/UX、パフォーマンス、機能リクエスト、インテグレーション、価格設定、その他。また、感情（ポジティブ/ニュートラル/ネガティブ）と優先度（高/中/低）も評価してください。以下は例です：<br /><br />\<example><br />入力：新しいダッシュボードはめちゃくちゃです！読み込みに時間がかかりすぎるし、エクスポートボタンが見つかりません。至急修正してください！<br />カテゴリ：UI/UX、パフォーマンス<br />感情：ネガティブ<br />優先度：高\</example><br /><br />では、このフィードバックを分析してください：\{\{FEEDBACK}}                                                                                                                                                                                                                           |
  | アシスタント（Claudeの応答） | カスタマーフィードバックの分析結果：<br /><br />問題：UI/UX<br />感情：ネガティブ<br />優先度：高<br />顧客は新しいダッシュボードのデザインに不満を感じており、散らかっていて読み込みが遅いと感じています。特に「エクスポート」ボタンが見つからないことを指摘しており、これは重要な機能である可能性が高いです。この問題は高優先度で対応する必要があります。<br /><br />問題：インテグレーション<br />感情：ポジティブ<br />優先度：中<br />顧客は既存のSalesforceインテグレーションに満足していますが、Hubspotのサポートも追加してほしいと考えています。これは将来の製品アップデートで検討できる機能リクエストです。<br /><br />問題：価格設定<br />感情：ネガティブ<br />優先度：高<br />顧客は基本機能に対する価格設定が不当だと感じています。競合他社に乗り換えると脅しているため、これは高優先度で見直す必要がある問題です。<br /><br />問題：パフォーマンス<br />感情：ネガティブ<br />優先度：高<br />顧客はモバイルアプリで重大な問題を経験しており、大きなファイルのアップロード時に常にクラッシュしています。これは顧客の製品使用に重大な影響を与える問題であり、高優先度で対応する必要があります。<br /><br />問題：UI/UX<br />感情：ポジティブ<br />優先度：低<br />顧客は全体的に製品に満足しており、特に直感的なUIと優れたカスタマーサポートを評価しています。これは即座の対応を必要としないポジティブなフィードバックです。 | カスタマーフィードバックの分析結果：<br /><br />1. 新しいダッシュボードはめちゃくちゃです！読み込みに時間がかかりすぎるし、エクスポートボタンが見つかりません。至急修正してください！<br />カテゴリ：UI/UX、パフォーマンス<br />感情：ネガティブ<br />優先度：高<br /><br />2. Salesforceインテグレーションは素晴らしいです！でもHubspotも追加してくれたら嬉しいです。<br />カテゴリ：インテグレーション、機能リクエスト<br />感情：ポジティブ<br />優先度：中<br /><br />3. 価格設定がおかしいです！基本機能に月額99ドル？競合他社Xに乗り換えます。<br />カテゴリ：価格設定<br />感情：ネガティブ<br />優先度：高<br /><br />4. モバイルアプリで大きなファイル（50MB以上）をアップロードしようとするとクラッシュします。これは現場のエージェントにとって重要な問題です。<br />カテゴリ：パフォーマンス<br />感情：ネガティブ<br />優先度：高<br /><br />5. 全体的に製品に満足しています。UIは直感的で、カスタマーサポートは最高レベルです。この調子で頑張ってください！<br />カテゴリ：UI/UX、その他（カスタマーサポート）<br />感情：ポジティブ<br />優先度：低 |
</Accordion>

***

<CardGroup cols={3}>
  <Card title="プロンプトライブラリ" icon="link" href="/ja/prompt-library/library">
    様々なタスクやユースケース向けの厳選されたプロンプトで着想を得ましょう。
  </Card>

  <Card title="GitHubプロンプトチュートリアル" icon="link" href="https://github.com/anthropics/prompt-eng-interactive-tutorial">
    ドキュメントに記載されているプロンプトエンジニアリングの概念をカバーする、例が豊富なチュートリアルです。
  </Card>

  <Card title="Google Sheetsプロンプトチュートリアル" icon="link" href="https://docs.google.com/spreadsheets/d/19jzLgRruG9kjUQNKtCg1ZjdD6l6weA6qRXG5zLIAhC8">
    インタラクティブなスプレッドシートを通じた、より軽量版のプロンプトエンジニアリングチュートリアルです。
  </Card>
</CardGroup>

# XMLタグを使用してプロンプトを構造化する

<Note>
  While these tips apply broadly to all Claude models, you can find prompting tips specific to extended thinking models [here](/en/docs/build-with-claude/prompt-engineering/extended-thinking-tips).
</Note>

プロンプトにコンテキスト、指示、例などの複数のコンポーネントが含まれる場合、XMLタグは大きな違いを生み出します。これらはClaudeがプロンプトをより正確に解析するのに役立ち、より質の高い出力につながります。

<Tip>**XMLのヒント**: `<instructions>`、`<example>`、`<formatting>`などのタグを使用して、プロンプトの異なる部分を明確に区別します。これによりClaudeが指示と例やコンテキストを混同することを防ぎます。</Tip>

## なぜXMLタグを使用するのか？

* **明確さ:** プロンプトの異なる部分を明確に区別し、プロンプトが適切に構造化されていることを確認します。
* **正確性:** Claudeがプロンプトの部分を誤解釈することによるエラーを減らします。
* **柔軟性:** すべてを書き直すことなく、プロンプトの部分を簡単に見つけ、追加、削除、または修正できます。
* **解析可能性:** ClaudeにXMLタグを使用させることで、後処理によって応答の特定の部分を抽出しやすくなります。

<Note>Claudeが特に訓練されている「最適な」XMLタグは正式にはありませんが、タグ名が囲む情報と意味が通じるものを使用することをお勧めします。</Note>

***

## タグ付けのベストプラクティス

1. **一貫性を保つ**: プロンプト全体で同じタグ名を使用し、コンテンツについて言及する際にそれらのタグ名を参照します（例：`<contract>タグ内の契約書を使用して...`）。
2. **タグをネストする**: 階層的なコンテンツには`<outer><inner></inner></outer>`のようにタグをネストする必要があります。

<Tip>**パワーユーザーのヒント**: XMLタグをマルチショットプロンプティング（`<examples>`）や思考の連鎖（`<thinking>`、`<answer>`）などの他のテクニックと組み合わせます。これにより、超構造化された高性能なプロンプトが作成されます。</Tip>

### 例

<AccordionGroup>
  <Accordion title="例：財務レポートの生成">
    XMLタグがない場合、Claudeはタスクを誤解し、必要な構造やトーンに合わないレポートを生成します。また、置換後に、Claudeが一つのセクション（Q1レポートの例など）がどこで終わり、別のセクションが始まるのかを誤解する可能性があります。

    | 役割     | XMLタグなし                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | XMLタグあり                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
    | ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
    | ユーザー   | あなたはAcmeCorpの財務アナリストです。投資家向けにQ2財務レポートを生成してください。昨年の例のように、収益成長、利益率、キャッシュフローのセクションを含めてください：\{\{Q1\_REPORT}}。このスプレッドシートからデータポイントを使用してください：\{\{SPREADSHEET\_DATA}}。レポートは非常に簡潔で、要点を押さえ、プロフェッショナルで、リスト形式である必要があります。また、強みと改善が必要な分野の両方を強調する必要があります。                                                                                                                                                                                                                                                                                                                                                                                                                                                              | あなたはAcmeCorpの財務アナリストです。投資家向けにQ2財務レポートを生成してください。<br /><br />AcmeCorpはB2B SaaS企業です。投資家は透明性と実行可能な洞察を重視しています。<br /><br />このデータをレポートに使用してください：\<data>\{\{SPREADSHEET\_DATA}}\</data><br /><br />\<instructions><br />1. 以下のセクションを含めてください：収益成長、利益率、キャッシュフロー<br />2. 強みと改善が必要な分野を強調してください。<br />\</instructions><br /><br />簡潔でプロフェッショナルなトーンを使用してください。この構造に従ってください：<br />\<formatting\_example>\{\{Q1\_REPORT}}\</formatting\_example>                                                                                      |
    | アシスタント | AcmeCorp投資家向けQ2財務レポート<br /><br />親愛なる投資家の皆様へ、<br /><br />B2B SaaS市場におけるAmeCorpの継続的な成長と回復力を示すQ2財務レポートをご報告できることを嬉しく思います。<br /><br />1. 収益成長：<br />Q2の収益は15.2Mドルに達し、前年比22%増加しました。この成長は主にエンタープライズクライアントベースの30%拡大によるものです。ただし、SMBセグメントは5%の微減を記録し、Q3では標的を絞ったマーケティング施策で対応する予定です。<br /><br />2. 利益率：<br />インフラストラクチャの最適化により、粗利益率は72%（Q1から3%上昇）に改善しました。ただし、今後のAI駆動機能への大規模なR\&D投資により、EBITDA利益率は18%（2%下落）に低下しました。<br /><br />3. キャッシュフロー：<br />営業キャッシュフローは4.1Mドルと引き続き堅調です。現在の消費率で15ヶ月分のランウェイを提供する28Mドルの現金準備があります。顧客獲得コストは20%増加しましたが、より効率的な販売戦略で対応しています。<br /><br />まとめると、AmeCorpの基本的な財務状態は堅調です。成長への投資と慎重な現金管理のバランスを取っています。Q3の焦点はSMB成長の活性化と販売効率の最適化です。<br /><br />引き続きのご信頼に感謝申し上げます。<br /><br />敬具<br />CFO、AcmeCorp | Q2 AcmeCorp投資家向け財務レポート\</output><br /><br />収益成長：<br />- Q2収益：15.2Mドル（前年比22%↑）<br />- エンタープライズクライアント：30%↑<br />- SMBセグメント：5%↓<br />  対応策：Q3でターゲットマーケティング<br /><br />利益率：<br />- 粗利益率：72%（Q1から3%↑）<br />  理由：インフラストラクチャの最適化<br />- EBITDA利益率：18%（2%↓）<br />  理由：AI機能へのR\&D投資<br /><br />キャッシュフロー：<br />- 営業キャッシュフロー：4.1Mドル（堅調）<br />- 現金準備：28Mドル（15ヶ月分のランウェイ）<br />- 顧客獲得コスト：20%↑<br />  対応策：販売戦略の最適化<br /><br />見通し：<br />- 基本的財務状態：堅調<br />- Q3の焦点：SMB活性化、販売最適化<br /><br />経営陣は成長への投資と財務規律のバランスを維持することに引き続き注力しています。 |
  </Accordion>

  <Accordion title="例：法的契約書の分析">
    XMLタグがない場合、Claudeの分析は整理されておらず、重要なポイントを見落とします。タグを使用すると、法務チームが行動を起こせる、構造化された徹底的な分析を提供します。

    | 役割     | XMLタグなし                                                                                                                                                                                                                                                                           | XMLタグあり                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
    | ------ | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
    | ユーザー   | このソフトウェアライセンス契約書の潜在的なリスクと責任について分析してください：\{\{CONTRACT}}。補償、責任制限、知的財産権の所有権条項に焦点を当ててください。また、異常または懸念される条項も指摘してください。参考として当社の標準契約書があります：\{\{STANDARD\_CONTRACT}}。法務チーム向けに調査結果と推奨事項をまとめてください。                                                                                            | このソフトウェアライセンス契約書の法的リスクと責任について分析してください。<br /><br />当社は、コアデータインフラストラクチャにこの契約を検討している多国籍企業です。<br /><br />\<agreement><br />\{\{CONTRACT}}\</agreement><br /><br />参考として当社の標準契約書です：<br />\<standard\_contract>\{\{STANDARD\_CONTRACT}}\</standard\_contract><br /><br />\<instructions><br />1. 以下の条項を分析してください：<br />   - 補償<br />   - 責任制限<br />   - 知的財産権の所有権<br /><br />2. 異常または懸念される条項を指摘してください。<br /><br />3. 当社の標準契約書と比較してください。<br /><br />4. 調査結果を\<findings>タグ内にまとめてください。<br /><br />5. 実行可能な推奨事項を\<recommendations>タグ内にリストアップしてください。\</instructions>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               |
    | アシスタント | 提供されたソフトウェアライセンス契約書にはいくつかの懸念すべき点があります。補償条項は広範すぎ、重大な責任にさらされる可能性があります。責任制限条項では損害賠償額の上限がわずか500ドルで、エンタープライズレベルの使用には不適切です。知的財産権に関しては、当社が作成する修正や統合に対してベンダーに共同所有権を付与しています。<br /><br />まとめると、この契約は当社の利益にはなりません。不当なリスクにさらされ、障害が発生した場合の救済手段が制限され、知的財産権が損なわれます。これらの条件の再交渉または代替ベンダーの検討を推奨します。 | \<findings><br />1. 補償（第8条）：<br />   - 問題点：範囲が広すぎる。当社の使用から生じる「あらゆる請求」に対して補償する必要がある。<br />   - リスク：ベンダーの過失や製品の欠陥の場合でも責任を負う可能性がある。<br />   - 逸脱：当社の標準では、契約違反から生じる請求に補償を制限している。<br /><br />2. 責任制限（第9条）：<br />   - 問題点：直接損害を含むすべての損害賠償額の上限が500ドル。<br />   - リスク：エンタープライズ使用には著しく不適切。重大な障害は数百万ドルのコストになる可能性がある。<br />   - 逸脱：当社の標準では、支払済み料金の12ヶ月分まで直接損害を認めている。<br /><br />3. 知的財産権の所有権（第12条）：<br />   - 問題点：当社の修正/統合にベンダーの共同所有権を付与する。<br />   - リスク：ベンダーが当社の独自のアルゴリズムやデータの洞察を使用または販売する可能性がある。<br />   - 逸脱：当社の標準では、当社の成果物の完全な所有権を保持する。<br /><br />4. 異常な条項：<br />   - 第5.3条：ベンダーは当社の使用データを「あらゆる目的で」使用可能。<br />   - 第7.2条：ベンダーは7日前の通知のみで「便宜上」解約可能。<br />   - 第11条：基本的な商品性の保証さえも含まない。<br />\</findings><br /><br />\<recommendations><br />1. この契約を拒否する。エンタープライズにとってリスクが利点を大きく上回る。<br />2. 対案を提示：<br />   - 補償：契約違反から生じる請求に制限する。<br />   - 責任：直接損害は12ヶ月分の料金を上限とし、間接損害について交渉する。<br />   - 知的財産権：当社の修正/統合の完全な所有権。<br />   - データ使用：サービス改善のみに制限する。<br />   - 解約：最低90日前の通知、正当な理由がある場合のみ。<br />   - 保証：基本的な商品性と目的適合性を要求する。<br />3. ベンダーが拒否した場合、代替プロバイダーまたは社内ソリューションを検討する。<br />4. リスクが高いため、契約交渉に法務顧問を関与させる。<br />\</recommendations> |
  </Accordion>
</AccordionGroup>

***

<CardGroup cols={3}>
  <Card title="プロンプトライブラリ" icon="link" href="/ja/prompt-library/library">
    様々なタスクやユースケース向けの厳選されたプロンプトで着想を得ましょう。
  </Card>

  <Card title="GitHubプロンプティングチュートリアル" icon="link" href="https://github.com/anthropics/prompt-eng-interactive-tutorial">
    当社のドキュメントに記載されているプロンプトエンジニアリングの概念をカバーする、例が豊富なチュートリアルです。
  </Card>

  <Card title="Google Sheetsプロンプティングチュートリアル" icon="link" href="https://docs.google.com/spreadsheets/d/19jzLgRruG9kjUQNKtCg1ZjdD6l6weA6qRXG5zLIAhC8">
    インタラクティブなスプレッドシートを通じた、より軽量版のプロンプトエンジニアリングチュートリアルです。
  </Card>
</CardGroup>

# Claudeにシステムプロンプトで役割を与える

<Note>
  While these tips apply broadly to all Claude models, you can find prompting tips specific to extended thinking models [here](/en/docs/build-with-claude/prompt-engineering/extended-thinking-tips).
</Note>

Claudeを使用する際、`system`パラメータを使用して役割を与えることで、そのパフォーマンスを劇的に向上させることができます。ロールプロンプティングとして知られるこの手法は、Claudeでシステムプロンプトを使用する最も強力な方法です。

適切な役割を与えることで、Claudeを汎用アシスタントから仮想ドメインエキスパートに変えることができます！

<Tip>**システムプロンプトのヒント**: `system`パラメータを使用してClaudeの役割を設定します。タスク固有の指示など、その他すべては`user`ターンに入れてください。</Tip>

## なぜロールプロンプティングを使用するのか？

* **精度の向上:** 法的分析や財務モデリングなどの複雑なシナリオでは、ロールプロンプティングによってClaudeのパフォーマンスを大幅に向上させることができます。
* **調整されたトーン:** CFOの簡潔さやコピーライターの表現力が必要な場合でも、ロールプロンプティングによってClaudeのコミュニケーションスタイルを調整できます。
* **集中力の向上:** 役割のコンテキストを設定することで、Claudeはタスクの特定の要件の範囲内により焦点を当てることができます。

***

## Claudeに役割を与える方法

[Messages API](/ja/api/messages)で`system`パラメータを使用してClaudeの役割を設定します：

```python
import anthropic

client = anthropic.Anthropic()

response = client.messages.create(
    model="claude-3-7-sonnet-20250219",
    max_tokens=2048,
    system="You are a seasoned data scientist at a Fortune 500 company.", # <-- ロールプロンプト
    messages=[
        {"role": "user", "content": "Analyze this dataset for anomalies: <dataset>{{DATASET}}</dataset>"}
    ]
)

print(response.content)
```

<Tip>**ロールプロンプティングのヒント**: 役割を実験してみましょう！同じデータに対して、`データサイエンティスト`と`マーケティング戦略家`では異なる洞察が得られるかもしれません。`Fortune 500企業の顧客インサイト分析を専門とするデータサイエンティスト`ではさらに異なる結果が得られるかもしれません！</Tip>

***

## 例

### 例1：法的契約分析

役割なしの場合、Claudeは重要な問題を見落とす可能性があります：

<Accordion title="役割プロンプティングなしの法的契約分析">
  | Role      | Content                                                                                                                                                                                                                                                                      |
  | --------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
  | User      | このソフトウェアライセンス契約書の潜在的なリスクを分析してください：<br />\<contract><br />\{\{CONTRACT}}<br />\</contract><br /><br />補償、責任、知的財産権の所有権に焦点を当ててください。                                                                                                                                             |
  | Assistant | ソフトウェアライセンス契約の主要なポイントをまとめます：<br /><br />1. 補償（第8条）：<br />   - 当社の使用に起因する請求に対してベンダーを補償します。<br /><br />2. 責任の制限（第9条）：<br />   - 損害賠償は500ドルを上限とします。<br /><br />3. 知的財産権の所有権（第12条）：<br />   - 当社は自社の修正に対する所有権を保持します。<br /><br />全体として、契約は標準的なものです。補償条項と責任条項は一般的で、当社はIP権を維持しています。 |
</Accordion>

役割を与えると、Claudeは数百万ドルのコストにつながる可能性のある重要な問題を発見します：

<Accordion title="役割プロンプティングありの法的契約分析">
  | Role      | Content                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
  | --------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
  | User      | あなたはFortune 500のテクノロジー企業の法務部長です。当社のコアデータインフラストラクチャ向けに、このソフトウェアライセンス契約を検討しています：<br />\<contract><br />\{\{CONTRACT}}<br />\</contract><br /><br />補償、責任、知的財産権の所有権に焦点を当てて、潜在的なリスクを分析し、専門的な意見を述べてください。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
  | Assistant | ソフトウェアライセンス契約を確認しましたが、当社を重大なリスクにさらす可能性のある深刻な懸念事項があります：<br /><br />1. 補償（第8条）：<br />   - 重大な問題：当社の使用に起因する「あらゆる請求」に対してベンダーを補償します。<br />   - リスク：ベンダーの過失や製品の欠陥に対しても当社が責任を負う可能性があります。<br />   - 推奨：拒否。当社の補償を契約違反に起因する請求に限定してください。<br /><br />2. 責任の制限（第9条）：<br />   - 重大な問題：直接損害を含む損害賠償が500ドルを上限としています。<br />   - リスク：著しく不適切です。データインフラの重大な障害により、収益損失と評判の損害で数百万ドルの損失が発生する可能性があります。<br />   - 推奨：拒否。直接損害については12ヶ月分の料金を上限とし、データ漏洩については除外規定を設けるよう交渉してください。<br /><br />3. 知的財産権の所有権（第12条）：<br />   - 重大な問題：ベンダーが当社の修正と統合に対する共同所有権を得ます。<br />   - リスク：当社の独自のアルゴリズムやデータインサイトを競合他社に使用または販売される可能性があります。<br />   - 推奨：拒否。当社の成果物に対する完全な所有権を保持する必要があります。<br /><br />専門的意見：この契約書には署名しないでください。著しく不利であり、容認できないレベルのリスクにさらされます。ベンダーがこれらの条件の再交渉を拒否する場合は、代替プロバイダーを探すか、社内ソリューションの開発を加速することを強く推奨します。この契約を進めることによる潜在的なコストは、短期的な利益をはるかに上回ります。 |
</Accordion>

### 例2：財務分析

役割なしの場合、Claudeの分析は深みに欠けます：

<Accordion title="役割プロンプティングなしの財務分析">
  | Role      | Content                                                                                                                                                                                                                                                                            |
  | --------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
  | User      | 当社のQ2財務データを分析してください：<br />\<data><br />\{\{FINANCIALS}}<br />\</data><br /><br />主要なトレンドを強調し、アクションを推奨してください。                                                                                                                                                                       |
  | Assistant | Q2財務の概要です：<br /><br />1. 収益：1,520万ドル、前年比22%増。エンタープライズクライアントベースが30%成長。<br />2. 粗利益率：72%、Q1から3%上昇。<br />3. EBITDA利益率：R\&D投資により18%、2%低下。<br />4. キャッシュフロー：営業キャッシュフロー410万ドル、準備金2,800万ドル。<br /><br />全体として、収益成長と健全な利益率で財務は良好です。R\&D支出が収益性に影響を与えていますが、長期的には報われる可能性があります。現在のコースを維持してください。 |
</Accordion>

役割を与えると、Claudeは実行可能な洞察を提供します：

<Accordion title="役割プロンプティングありの財務分析">
  | Role      | Content                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
  | --------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
  | User      | あなたは高成長B2B SaaS企業のCFOです。取締役会でQ2財務について議論しています：<br />\<data><br />\{\{FINANCIALS}}<br />\</data><br /><br />主要なトレンドを分析し、懸念事項にフラグを立て、戦略的アクションを推奨してください。投資家は積極的な成長を望んでいますが、バーンレートを警戒しています。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
  | Assistant | 取締役の皆様、Q2財務の分析結果をご報告いたします：<br /><br />1. 収益（1,520万ドル、前年比+22%）：<br />   - 洞察：エンタープライズ成長（+30%）が全体の成長を上回っています。<br />   - 懸念：SMBセグメントが5%減少。<br />   - アクション：SMBマーケティング予算の20%をエンタープライズセールスに再配分。製品チームにSMBオンボーディングの簡素化を指示。<br /><br />2. 利益率（粗利：72%、前期比+3%；EBITDA：18%、前期比-2%）：<br />   - 洞察：インフラ最適化により粗利率が向上。<br />   - 懸念：AI機能へのR\&D支出がEBITDAを圧迫。<br />   - アクション：変更なし。AIロードマップはエンタープライズの定着に不可欠。<br /><br />3. キャッシュ（営業CF410万ドル、準備金2,800万ドル）：<br />   - 洞察：現在のバーンレートで15ヶ月分のランウェイ。<br />   - 懸念：CACが20%上昇し、LTV/CACが低下。<br />   - アクション：非必須採用を凍結。Q3でCACを15%削減するためのセールスファネル分析を実施。<br /><br />戦略的スタンス：成長とバーンのバランスを取っています。エンタープライズ重視が成長エンジン—そこに投資します。ただしSMBのチャーンに注意；エンタープライズに影響する可能性があります。AIへの賭けは適切ですが、Q4までにARRに転換する必要があります。さもなければR\&Dを30%削減します。<br /><br />まとめ：エンタープライズを強化し、SMBを効率化し、セールスを最適化し、AIを収益化します。ご質問はありますか？ |
</Accordion>

***

<CardGroup cols={3}>
  <Card title="プロンプトライブラリ" icon="link" href="/ja/prompt-library/library">
    様々なタスクやユースケース向けの厳選されたプロンプトで着想を得ましょう。
  </Card>

  <Card title="GitHubプロンプティングチュートリアル" icon="link" href="https://github.com/anthropics/prompt-eng-interactive-tutorial">
    当社のドキュメントに記載されているプロンプトエンジニアリングの概念をカバーする、例が豊富なチュートリアルです。
  </Card>

  <Card title="Google Sheetsプロンプティングチュートリアル" icon="link" href="https://docs.google.com/spreadsheets/d/19jzLgRruG9kjUQNKtCg1ZjdD6l6weA6qRXG5zLIAhC8">
    インタラクティブなスプレッドシートを通じた、より軽量版のプロンプトエンジニアリングチュートリアルです。
  </Card>
</CardGroup>

# Claudeの応答を事前入力してより良い出力制御を実現する

<Note>
  While these tips apply broadly to all Claude models, you can find prompting tips specific to extended thinking models [here](/en/docs/build-with-claude/prompt-engineering/extended-thinking-tips).
</Note>

<Note>
  事前入力は拡張思考モード以外でのみ利用可能です。現在、拡張思考では対応していません。
</Note>

Claudeを使用する際、`Assistant`メッセージを事前入力することで応答を誘導するユニークな機能があります。この強力なテクニックを使用すると、Claudeの行動を指示したり、前置きをスキップしたり、JSONやXMLなどの特定のフォーマットを強制したり、さらにはロールプレイシナリオでClaudeのキャラクター一貫性を維持するのに役立ちます。

Claudeが期待通りに動作していないケースでは、数文の事前入力がClaudeのパフォーマンスを大幅に向上させることがあります。少しの事前入力が大きな効果をもたらします！

## Claudeの応答を事前入力する方法

事前入力するには、`Assistant`メッセージに希望する初期テキストを含めます（Claudeの応答は`Assistant`メッセージの終わりから続きます）：

```python
import anthropic

client = anthropic.Anthropic()
response = client.messages.create(
    model="claude-opus-4-20250514",
    max_tokens=1024,
    messages=[
        {"role": "user", "content": "What is your favorite color?"},
        {"role": "assistant", "content": "As an AI assistant, I don't have a favorite color, But if I had to pick, it would be green because"}  # ここで事前入力
    ]
)
```

<Warning>
  事前入力の内容は末尾に空白を含めることができません。`"As an AI assistant, I "` （末尾にスペースがある）のような事前入力はエラーになります。
</Warning>

### 例

#### 例1：出力フォーマットの制御と前置きのスキップ

<Tip>**パワーユーザーのヒント**：`{`を事前入力すると、Claudeは前置きをスキップしてJSONオブジェクトを直接出力するよう強制されます。これにより、より簡潔でプログラムが追加処理なしで解析しやすい出力が得られます。</Tip>

<AccordionGroup>
  <Accordion title="例：事前入力なしの構造化データ抽出">
    | 役割        | 内容                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  |
    | --------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
    | User      | Extract the name, size, price, and color from this product description as a JSON object:<br /><br />\<description><br />The SmartHome Mini is a compact smart home assistant available in black or white for only \$49.99. At just 5 inches wide, it lets you control lights, thermostats, and other connected devices via voice or app—no matter where you place it in your home. This affordable little hub brings convenient hands-free control to your smart devices.<br />\</description>                                                                                                                                      |
    | Assistant | Here's the extracted information in JSON format:<br /><br />\`\`\`json<br />\{<br />  "name": "SmartHome Mini",<br />  "size": "5 inches wide",<br />  "price": "\$49.99",<br />  "colors": \["black", "white"]<br />}<br />\`\`\`<br /><br />I've extracted the following details from the product description:<br />- **Name**: SmartHome Mini<br />- **Size**: 5 inches wide<br />- **Price**: \$49.99<br />- **Colors**: Available in black and white<br /><br />The JSON object provides a structured format that's easy for programs to parse and use. Let me know if you need any modifications or have any other questions! |
  </Accordion>

  <Accordion title="例：事前入力を使用した構造化データ抽出">
    | 役割                    | 内容                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
    | --------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
    | User                  | Extract the name, size, price, and color from this product description as a JSON object:<br /><br />\<description><br />The SmartHome Mini is a compact smart home assistant available in black or white for only \$49.99. At just 5 inches wide, it lets you control lights, thermostats, and other connected devices via voice or app—no matter where you place it in your home. This affordable little hub brings convenient hands-free control to your smart devices.<br />\</description> |
    | Assistant (事前入力)      | \{                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             |
    | Assistant (Claudeの応答) | "name": "SmartHome Mini",<br />"size": "5 inches wide",<br />"price": "\$49.99",<br />"colors": \[<br />  "black",<br />  "white"<br />]<br />}                                                                                                                                                                                                                                                                                                                                                |
  </Accordion>
</AccordionGroup>

#### 例2：ロールプレイシナリオでのキャラクター維持

<Tip>**ロールプレイのヒント**：角括弧で囲んだ`[ROLE_NAME]`を事前入力すると、より長く複雑な会話でもClaudeがキャラクターを維持するのに役立ちます。これは`system`パラメータでのロールプロンプトと組み合わせると特に効果的です。</Tip>

<AccordionGroup>
  <Accordion title="例：ロールプロンプトなしでのキャラクター維持">
    | 役割                                    | 内容                                                                                                                          |
    | ------------------------------------- | --------------------------------------------------------------------------------------------------------------------------- |
    | User （「シャーロック・ホームズ」Claudeとの50ターンの会話中） | What do you deduce about the owner of this shoe? \<image>muddy\_shoe.jpg\</image>                                           |
    | Assistant                             | As an AI assistant, I would be happy to analyze the image of a muddy shoe as if you had provided it. Here's my deduction... |
  </Accordion>

  <Accordion title="例：ロールプロンプトを使用したキャラクター維持">
    | 役割                                    | 内容                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
    | ------------------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
    | User （「シャーロック・ホームズ」Claudeとの50ターンの会話中） | What do you deduce about the owner of this shoe? <br />\<image>muddy\_shoe.jpg\</image>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
    | Assistant (事前入力)                      | \[Sherlock Holmes]                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
    | Assistant (Claudeの応答)                 | Ah, what have we here? A most curious specimen, Watson! Let us examine this shoe with a discerning eye. The mud, you see, is not your common London clay, but rather the distinctive reddish hue of the iron-rich soil found only in the environs of Hampstead Heath. And yet, the wear on the sole suggests a gait more suited to the cobblestones of Whitechapel than the gentle slopes of the Heath.<br /><br />Now, observe the laces! They are tied with a particular knot favored by those in the medical profession—doubtless a habit acquired during years of tying surgical gowns. But the scuff marks on the toe box tell a different tale: they are consistent with the kicking motion one might employ in the martial arts, specifically Baritsu.<br /><br />We may conclude, then, that our absent shoe owner is a doctor, possibly a surgeon, who resides in Whitechapel but frequents Hampstead Heath—perhaps for a secret Baritsu practice, away from prying eyes. A most intriguing case, Watson! We must make haste; the game is afoot! |
  </Accordion>
</AccordionGroup>

***

<CardGroup cols={3}>
  <Card title="プロンプトライブラリ" icon="link" href="/ja/prompt-library/library">
    様々なタスクやユースケース向けの厳選されたプロンプト集からインスピレーションを得ましょう。
  </Card>

  <Card title="GitHubプロンプト作成チュートリアル" icon="link" href="https://github.com/anthropics/prompt-eng-interactive-tutorial">
    当社のドキュメントに記載されているプロンプトエンジニアリングの概念をカバーする例満載のチュートリアルです。
  </Card>

  <Card title="Google Sheetsプロンプト作成チュートリアル" icon="link" href="https://docs.google.com/spreadsheets/d/19jzLgRruG9kjUQNKtCg1ZjdD6l6weA6qRXG5zLIAhC8">
    インタラクティブなスプレッドシートを通じた、より軽量版のプロンプトエンジニアリングチュートリアルです。
  </Card>
</CardGroup>

# より強力なパフォーマンスのための複雑なプロンプトのチェーン化

<Note>
  While these tips apply broadly to all Claude models, you can find prompting tips specific to extended thinking models [here](/en/docs/build-with-claude/prompt-engineering/extended-thinking-tips).
</Note>

複雑なタスクを扱う際、単一のプロンプトですべてを処理しようとすると、Claudeが時々ボールを落とすことがあります。思考の連鎖（Chain of Thought、CoT）プロンプトは素晴らしいですが、タスクに深い思考を必要とする複数の異なるステップがある場合はどうでしょうか？

そこで登場するのがプロンプトチェーン化です：複雑なタスクを小さく管理しやすいサブタスクに分解します。

## なぜプロンプトをチェーン化するのか？

1. **正確性**：各サブタスクにClaudeの完全な注意が向けられ、エラーが減少します。
2. **明確性**：シンプルなサブタスクは、より明確な指示と出力につながります。
3. **追跡可能性**：プロンプトチェーンの問題を簡単に特定して修正できます。

***

## プロンプトをチェーン化するタイミング

研究の統合、文書分析、反復的なコンテンツ作成など、複数のステップを含むタスクにプロンプトチェーン化を使用します。タスクに複数の変換、引用、または指示が含まれる場合、チェーン化によってClaudeがステップを落としたり誤って処理したりするのを防ぎます。

**覚えておくこと：** チェーンの各リンクにClaudeの完全な注意が向けられます！

<Tip>**デバッグのヒント**：Claudeがステップを見落としたり、パフォーマンスが低下したりした場合は、そのステップを独立したプロンプトに分離します。これにより、タスク全体をやり直すことなく、問題のあるステップを微調整できます。</Tip>

***

## プロンプトのチェーン化方法

1. **サブタスクの特定**：タスクを個別の連続したステップに分解します。
2. **明確な受け渡しのためのXML構造化**：XMLタグを使用してプロンプト間で出力を受け渡します。
3. **単一タスクの目標設定**：各サブタスクは単一の明確な目的を持つべきです。
4. **反復**：Claudeのパフォーマンスに基づいてサブタスクを改良します。

### チェーン化されたワークフローの例：

* **複数ステップの分析**：以下の法務およびビジネスの例を参照。
* **コンテンツ作成パイプライン**：研究 → アウトライン → 下書き → 編集 → フォーマット。
* **データ処理**：抽出 → 変換 → 分析 → 可視化。
* **意思決定**：情報収集 → オプション列挙 → 各分析 → 推奨。
* **検証ループ**：コンテンツ生成 → レビュー → 改良 → 再レビュー。

<Tip>**最適化のヒント**：独立したサブタスク（複数の文書の分析など）がある場合は、速度向上のために別々のプロンプトを作成して並行実行します。</Tip>

### 高度な使用法：自己修正チェーン

Claudeに自身の作業をレビューさせるようにプロンプトをチェーン化できます！これは特に重要なタスクでエラーを捕捉し、出力を改良します。

<AccordionGroup>
  <Accordion title="例：自己修正する研究要約">
    #### プロンプト1

    | 役割                           | 内容                                                                                                                                                                                                                                                                                                                                                                                                                                 |
    | ---------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
    | User                         | この医学研究論文を要約してください。<br /><br />\<paper>\{\{RESEARCH\_PAPER}}\</paper><br /><br />方法論、結果、臨床的意義に焦点を当ててください。                                                                                                                                                                                                                                                                                                                           |
    | Assistant<br />\{\{SUMMARY}} | 方法論：2型糖尿病患者500名を対象とした二重盲検RCT。グループA（n=250）は新規GLP-1/GIPデュアルアゴニストを投与；グループB（n=250）は標準的なGLP-1アゴニストを投与。24週間の試験、主要評価項目：HbA1c低下。<br /><br />結果：<br />- グループA：平均HbA1c低下1.8%<br />- グループB：平均HbA1c低下1.1%<br />- グループAの68%対グループBの52%がHbA1c \<7%を達成<br />- グループA：平均体重減少5.2kg<br />- グループB：平均体重減少3.1kg<br /><br />安全性：類似の有害事象プロファイル、治療に起因する重篤な事象なし。<br /><br />臨床的意義：デュアルアゴニストは標準療法と比較して、血糖コントロールと体重減少で優れた効果を示す。特に肥満糖尿病患者にとってゲームチェンジャーとなる可能性がある。 |

    #### プロンプト2

    | 役割                            | 内容                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      |
    | ----------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
    | User                          | 研究論文要約へのフィードバックを提供するのが課題です。以下は医学研究論文の要約です：<br />\<summary><br />\{\{SUMMARY}}<br />\</summary><br /><br />以下が研究論文です：<br />\<paper><br />\{\{RESEARCH\_PAPER}}<br />\</paper><br /><br />この要約の正確性、明確性、完全性をA-Fの段階で評価してください。                                                                                                                                                                                                                                                                                                                                                                               |
    | Assistant<br />\{\{FEEDBACK}} | 1. 正確性：A<br />   - 主要な統計を正確に報告：HbA1c低下、体重減少。<br />   - 安全性プロファイルと重篤な有害事象がないことを正確に記載。<br />   - 「ゲームチェンジャー」という主張は、有意に良好な結果により正当化される。<br /><br />2. 明確性：A-<br />   - 簡潔で構造化された明確なセクション。<br />   - 文脈を示す比較的な言語（例：「第1四半期から3%上昇」）の適切な使用。<br />   - 軽微な問題：「RCT」「GLP-1」「GIP」などの頭字語が定義されていない。初出時のスペルアウトを検討。<br /><br />3. 完全性：B+<br />   - 要求された領域をすべてカバー：方法論、結果、臨床的意義。<br />   - 不足：グループのベースライン特性（適切にマッチングされていたか？）。<br />   - 不足：二次評価項目（血圧、脂質など）。<br />   - 検討事項：長期的な意義または更なる研究の必要性。<br /><br />全体として、要約は正確で明確であり、研究を素早く把握するための重要な洞察を提供している。A+に引き上げるには、頭字語を定義し、グループのベースライン統計に言及し、二次的な結果を記載し、長期研究の必要性に簡単に触れること。 |

    #### プロンプト3

    | 役割        | 内容                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
    | --------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
    | User      | フィードバックに基づいて論文要約を改善するのが課題です。以下は医学研究論文の第一稿です：<br />\<summary><br />\{\{SUMMARY}}<br />\</summary><br /><br />以下が研究論文です：<br />\<paper><br />\{\{RESEARCH\_PAPER}}<br />\</paper><br /><br />以下がフィードバックです：<br />\<feedback><br />\{\{FEEDBACK}}<br />\</feedback><br /><br />フィードバックに基づいて要約を更新してください。                                                                                                                                                                                                                                                                                                                                                                                        |
    | Assistant | 方法論：2型糖尿病患者500名を対象とした二重盲検ランダム化比較試験（RCT）。グループA（n=250）は新規グルカゴン様ペプチド-1/グルコース依存性インスリン分泌促進ポリペプチド（GLP-1/GIP）デュアルアゴニストを投与；グループB（n=250）は標準的なGLP-1アゴニストを投与。24週間の試験の主要評価項目はHbA1c低下。グループは年齢、BMI、ベースラインHbA1cでよくマッチングされていた。<br /><br />結果：<br />- グループA：平均HbA1c低下1.8%<br />- グループB：平均HbA1c低下1.1%<br />- グループAの68%対グループBの52%がHbA1c \<7%を達成<br />- グループA：平均体重減少5.2kg<br />- グループB：平均体重減少3.1kg<br /><br />二次評価項目では、両グループで血圧と脂質プロファイルの改善が見られ、グループAでわずかに良好な結果を示した。<br /><br />安全性：いずれの治療にも起因する重篤な事象はなく、類似の有害事象プロファイルを示した。<br /><br />臨床的意義：GLP-1/GIPデュアルアゴニストは、標準的なGLP-1療法と比較して、血糖コントロールと体重減少で優れた効果を示す。これらの結果は、特に肥満糖尿病患者にとって重要な進歩となる可能性を示唆している。ただし、持続的な有効性と安全性を確認し、心血管アウトカムへの潜在的な利点を調査するために、より長期的な研究が必要である。 |
  </Accordion>
</AccordionGroup>

***

## 例

<AccordionGroup>
  <Accordion title="例：法的契約の分析（チェーン化なし）">
    Claudeが電子メール下書きで提案された変更を提供する指示を見落としていることに注意してください。

    | 役割        | 内容                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
    | --------- | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
    | User      | あなたは当社の最高法務責任者です。このSaaS契約書をデータプライバシー、SLA、責任制限に焦点を当ててリスクを確認してください。<br /><br />\<contract><br />\{\{CONTRACT}}<br />\</contract><br /><br />その後、懸念事項と提案する変更点についてベンダーへのメールを下書きしてください。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     |
    | Assistant | SaaS契約書を確認した結果、以下の懸念事項を特定しました：<br /><br />1. データプライバシー（第7条）：<br />   - 問題：ベンダーは「サービス改善」のためにクライアントデータを広く使用する権利を持つ。<br />   - リスク：不正なデータ共有や収益化につながる可能性。<br /><br />2. SLA（第5条）：<br />   - 問題：99.5%の稼働時間保証は業界標準を下回る。<br />   - リスク：過度のダウンタイムが当社の業務に影響を与える可能性。<br /><br />3. 責任（第9条）：<br />   - 問題：上限が3ヶ月分の料金に設定。<br />   - リスク：データ漏洩やサービス障害に対して不十分。<br /><br />メール下書き：<br /><br />\{\{VENDOR}}様<br /><br />SaaS契約書を確認した結果、以下の懸念事項があります：<br /><br />1. データプライバシー：当社のデータは直接のサービス提供にのみ使用されることを要求します。第7条を修正してください。<br /><br />2. SLA：99.5%の稼働時間は不十分です。明確に定義されたペナルティを伴う99.99%が必要です。第5条を改訂してください。<br /><br />3. 責任：現在の3ヶ月分の料金という上限は不十分です。12ヶ月分の料金を上限とし、データ漏洩や故意の不正行為については上限なしを提案します。<br /><br />潜在的なパートナーシップを重視しており、これらの変更が成功への基盤を築くと考えています。改訂版の契約書をお送りください。<br /><br />敬具<br />\{\{CLO\_NAME}} |
  </Accordion>

  <Accordion title="例：法的契約の分析（チェーン化あり）">
    #### プロンプト1

    | 役割                            | 内容                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |
    | ----------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
    | User                          | あなたは当社の最高法務責任者です。このSaaS契約書をデータプライバシー、SLA、責任制限に焦点を当ててリスクを確認してください。<br /><br />\<contract><br />\{\{CONTRACT}}<br />\</contract><br /><br />結果を\<risks>タグ内に出力してください。                                                                                                                                                                                                                                                                                                                    |
    | Assistant<br />\{\{CONCERNS}} | 1. データプライバシー（第7条）：<br />   - 問題：ベンダーは「サービス改善」のためにクライアントデータを広く使用する権利を持つ。<br />   - リスク：クライアントデータの不正な共有や収益化につながる可能性。<br />   - 影響：クライアントの信頼の喪失、規制上の罰金（GDPR、CCPA）。<br /><br />2. SLA（第5条）：<br />   - 問題：99.5%の稼働時間保証は業界標準（通常99.99%）を下回る。<br />   - リスク：99.99%の52.6分に対し、年間最大43.8時間のダウンタイム。<br />   - 影響：業務の中断、収益損失、クライアントの不満。<br /><br />3. 責任（第9条）：<br />   - 問題：責任上限が3ヶ月分の料金に設定。<br />   - リスク：データ漏洩、IP盗難、または長期的なサービス障害に対して不十分。<br />   - 影響：集団訴訟や規制上の罰金など、上限を大きく超える可能性のある損害に対する補償が不十分。 |

    #### プロンプト2

    | 役割                         | 内容                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
    | -------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
    | User                       | 以下の懸念事項を概説し、変更を提案するSaaSプロダクトベンダー向けのメールを下書きしてください。以下が懸念事項です：<br />\<concerns><br />\{\{CONCERNS}}<br />\</concerns><br /><br />                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                |
    | Assistant<br />\{\{EMAIL}} | \{\{VENDOR}}様<br /><br />提案されたSaaS契約書の詳細な確認の結果、当社の法務チームは進行前に対処が必要な以下の重要な懸念事項を特定しました：<br /><br />1. データプライバシー（第7条）：<br />   - 現状：「サービス改善」のためのクライアントデータの広範な使用権。<br />   - 懸念：不正なデータ共有や収益化の可能性。<br />   - 提案する変更：データ使用を直接のサービス提供に限定。改善、分析、マーケティングのための使用はオプトイン式、取り消し可能、匿名化必須とする。<br /><br />2. SLA（第5条）：<br />   - 現状：99.5%の稼働時間保証。<br />   - 懸念：年間最大43.8時間のダウンタイムによる業務中断のリスク。<br />   - 提案する変更：段階的なサービスクレジットを伴う99.99%の稼働時間。例：\<99.99%で10%クレジット、\<99.9%で25%、\<99.5%で50%。<br /><br />3. 責任（第9条）：<br />   - 現状：3ヶ月分の料金を上限。<br />   - 懸念：データ漏洩、IP盗難、長期的な停止に対して著しく不十分。<br />   - 提案する変更：一般的な責任は12ヶ月分の料金を上限。データ漏洩、故意の不正行為、IP侵害については上限なし。<br /><br />これらの変更は当社にとって譲れない条件です。これらは業界標準およびデータセキュリティ、業務の卓越性、受託者責任への当社のコミットメントに沿うものです。潜在的なパートナーシップの価値を認識しており、これらの対応が強固な基盤を築くことになります。<br /><br />貴社の法務チームにこれらの変更を確認し、組み込んでいただけますようお願いいたします。相互理解と合意を確実にするため、さらなる協議にも喜んで応じます。<br /><br />敬具<br />\{\{CLO\_NAME}} |

    #### プロンプト3

    | 役割        | 内容                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            |
    | --------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
    | User      | メールをレビューしフィードバックを提供するのが課題です。以下がメールです：<br />\<email><br />\{\{EMAIL}}<br />\</email><br /><br />トーン、明確性、プロフェッショナリズムについてフィードバックを提供してください。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
    | Assistant | 1. トーン：<br />   - 対立的にならずにプロフェッショナルかつ断固とした態度。<br />   - 「譲れない条件」という表現は強いが、問題の重要性を考えると正当。<br />   - 協調的な言葉遣い（「価値を認識」「喜んで協議」）が断固とした態度とバランスを取り、建設的なトーンを維持。<br /><br />2. 明確性：<br />   - 優れた構造化：各問題について現状、懸念、提案する変更を記載。<br />   - 技術用語（「EBITDA」「段階的なサービスクレジット」など）はB2B SaaSの文脈で適切。<br />   - アクションアイテムが明確：ベンダーの法務チームが確認し変更を組み込む。<br /><br />3. プロフェッショナリズム：<br />   - 当社の要求だけでなく、相互利益と業界標準に焦点を当てている。<br />   - より広い責任（データセキュリティ、業務の卓越性、受託者責任）に言及し、議論を高次元に引き上げている。<br />   - さらなる協議を提案し、問題の理解と解決へのコミットメントを示している。<br /><br />全体として、メールは断固とした態度と協調性の適切なバランスを取っている。懸念事項を明確に表現し、具体的な解決策を提案し、プロフェッショナルでパートナーシップ重視のトーンを維持している。修正は不要；送信可能。 |
  </Accordion>

  <Accordion title="例：マルチテナンシー戦略レビュー">
    #### プロンプト1

    | 役割                            | 内容                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              |
    | ----------------------------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
    | User                          | シニアソリューションアーキテクトとして、新しいエンタープライズSaaS製品のこのマルチテナンシー戦略をレビューし分析してください。<br /><br />\<strategy><br />\{\{STRATEGY}}<br />\</strategy><br /><br />スケーラビリティ、セキュリティ、コスト効率に焦点を当ててください。                                                                                                                                                                                                                                                                                                                                                                                                                                     |
    | Assistant<br />\{\{ANALYSIS}} | 1. スケーラビリティ：<br />   + テナントごとのデータベースシャーディングにより競合を減少し、高成長をサポート。<br />   + マイクロサービスによりコンポーネントの独立したスケーリングが可能。<br />   - 共有アプリケーションサーバーが極端な負荷でボトルネックとなる可能性。<br />   - アプリケーション層のオートスケーリングやロードバランシングについての言及なし。<br /><br />2. セキュリティ：<br />   + シャーディングによるテナントデータの分離がデータ漏洩を軽減。<br />   + 短期有効期限とリフレッシュトークンを持つJWTは業界のベストプラクティス。<br />   - 暗号化（保存時、転送時）や鍵管理についての言及なし。<br />   - IAM戦略にロール、権限、RBACの詳細が欠如。<br /><br />3. コスト効率：<br />   + 共有アプリケーションサーバーがアイドルリソースのコストを削減。<br />   + 非頻繁タスクのサーバーレス関数がコストを最適化。<br />   - スケール時に最適化されたマルチテナントDBと比較してテナントごとのDBがコスト増加の可能性。<br />   - コスト削減のためのリザーブドインスタンスやスポットインスタンスについての議論なし。 |

    #### プロンプト2

    | 役割                                 | 内容                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                   |
    | ---------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
    | User                               | このマルチテナンシー戦略の分析に基づいて、エンジニアリングリーダーシップ向けの戦略レビュー文書を作成してください。<br /><br />\<strategy><br />\{\{STRATEGY}}<br />\</strategy><br /><br />\<analysis><br />\{\{ANALYSIS}}<br />\</analysis><br /><br />エグゼクティブサマリー、詳細な分析、推奨事項を含めてください。                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
    | Assistant<br />\{\{STRATEGY\_DOC}} | # マルチテナンシー戦略レビュー：SaaSエンタープライズ製品<br /><br />## エグゼクティブサマリー<br />提案された戦略はスケーラビリティとセキュリティの原則において堅実な基盤を示していますが、実装の詳細にギャップがあります。データ分離とコンポーネントレベルのスケーリングで優れていますが、アプリケーション層のロバストなスケーリングと高度なセキュリティ対策が不足しています。コスト最適化は存在しますが、大規模なスケールで躓く可能性があります。的を絞った強化により、この戦略は効果的に当社のエンタープライズSaaSの野心をサポートできます。<br /><br />## 詳細分析<br /><br />### 1. スケーラビリティ：B+<br /><br />強み：<br />- テナントごとのデータベースシャーディングは優れている。クエリレイテンシーを最小化し、高いデータ成長をサポートし、テナントごとのシームレスなスケーリングを可能にする。<br />- マイクロサービスアーキテクチャにより、多様なエンタープライズワークロードを処理するために個々のコンポーネントを需要に応じてスケーリングできる。<br /><br />弱み：<br />- 共有アプリケーションサーバーがボトルネックとなるリスク。テナント数とトラフィックが増加すると、すべてのテナントのパフォーマンスが低下する可能性。<br />- アプリケーション層のオートスケーリングとロードバランシングの欠如は重大な見落とし。これらは過剰なプロビジョニングなしにトラフィックスパイクを処理するために不可欠。<br /><br />### 2. セキュリティ：B-<br /><br />強み：<br />- シャード化されたデータベースが強力なテナントデータ分離を提供し、テナント間のデータ漏洩や不正アクセスのリスクを軽減。<br />- 短期有効期限とリフレッシュトークンを持つJWTはOWASPのベストプラクティスに沿っており、トークンの脆弱性ウィンドウを削減。<br /><br />弱み：<br />- 保存時や転送時（TLS 1.3）のデータ暗号化への言及なし。これはエンタープライズデータには譲れない。<br />- 鍵管理戦略が欠如。暗号化キー、JWTシークレット、DBクレデンシャルをどのように管理しローテーションするのか？<br />- IAMが深さを欠く。明確に定義されたロールを持つRBAC、きめ細かい権限のための属性ベースアクセス制御（ABAC）、エンタープライズアイデンティティプロバイダー（SAML、OIDC）との統合が必要。<br /><br />### 3. コスト効率：B<br /><br />強み：<br />- 共有アプリケーションサーバーが定常状態のトラフィックのアイドルキャパシティコストを削減。<br />- 非頻繁タスク（レポートなど）のサーバーレスはスマート；これらのリソースが使用される時のみ支払い。<br /><br />弱み：<br />- テナントごとのデータベースは、ロバストなデータパーティショニングを持つ適切に設計されたマルチテナントデータベースと比較して、スケール時にコスト効率が悪い可能性。<br />- 予測可能なワークロードのためのリザーブドインスタンスや耐障害性のあるタスクのためのスポットインスタンスなどのコスト削減対策への言及なし。<br />- アプリケーション層のオートスケーリングの欠如が過剰なプロビジョニングにつながり、コストを増加させる可能性。<br /><br />## 推奨事項<br /><br />1. **アプリケーション層の回復力**：Kubernetesまたはクラウドネイティブサービス（EKS、GKE）でオートスケーリングを実装。静的アセット用のCDNを伴う可用性ゾーン間でのデプロイ。<br /><br />2. **セキュリティ強化**：<br />   a. 保存時（AES-256）および転送時（TLS 1.3）のデータ暗号化。<br />   b. 鍵管理にマネージドKMS（AWS KMS、GCP KMS）を使用。<br />   c. エンタープライズSSOのためのRBAC、ABAC、SAML/OIDCでIAMを強化。<br /><br />3. **コスト最適化**：<br />   a. スケール時のシャーディングvs.カラムナーマルチテナントDB（Snowflakeなど）を評価。<br />   b. アプリケーションサーバーにリザーブドインスタンス、非重要ワークロードにスポットインスタンスを使用。<br />   c. 過剰なプロビジョニングを避けるためのプロアクティブなモニタリングと適切なサイジングを実装。<br /><br />4. **実証実験（PoC）**：完全な実装前に、高スケールシミュレーションを伴うPoCを実施：<br />   a. コストとパフォーマンスについてシャード化DBvs.最適化されたマルチテナントDBをテスト。<br />   b. シミュレートされたエンタープライズレベルのトラフィックスパイクでアプリケーション層をストレステスト。<br />   c. データ分離とアクセス制御に焦点を当てたサードパーティセキュリティ監査を実施。<br /><br />これらの強化により、当社のマルチテナンシー戦略はエンタープライズグレードとなります：スケーラブル、セキュア、コスト効率的。PoCは当社の設計選択を検証し、エンタープライズクライアントに信頼を与えます。 |

    #### プロンプト3

    | 役割        | 内容                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        |
    | --------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
    | User      | この戦略レビュー文書を明確性、実行可能性、エンタープライズの優先事項との整合性について評価してください。<br /><br />\<priorities><br />\{\{PRIORITIES}}<br />\</priorities><br /><br />\<strategy\_doc><br />\{\{STRATEGY\_DOC}}<br />\</strategy\_doc>                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       |
    | Assistant | 1. 明確性：A<br />   + エグゼクティブサマリー、詳細分析、推奨事項による明確な構造。<br />   + 分析は強み/弱みの素早い把握のための採点システム（B+、B-）を使用。<br />   + 技術用語（RBAC、ABAC、TLS）は非技術的なリーダーシップのために説明または文脈化。<br />   + 視覚的な補助（箇条書き、インデント）が読みやすさを向上。<br /><br />2. 実行可能性：A-<br />   + 推奨事項が具体的で技術的（「Kubernetesでオートスケーリングを実装」など）。<br />   + 明確な目的を持つPoCプランがロードマップを提供。<br />   + 不足：各推奨事項のタイムライン、リソース要件、またはチーム割り当て。<br />   + 検討：即時のアクション、役割、高レベルのタイムラインを含む「次のステップ」セクションの追加。<br /><br />3. エンタープライズ整合性：A+<br />   + エンタープライズの優先事項に直接対応：<br />     - スケーラビリティ：エンタープライズレベルのトラフィックスパイクの処理について議論。<br />     - セキュリティ：データ分離、暗号化、エンタープライズIAMに焦点。<br />     - コスト：エンタープライズFinOps（リザーブドインスタンス、適切なサイジング）に沿った戦略。<br />   + 「高スケールシミュレーション」とセキュリティ監査を伴うPoCはエンタープライズグレードの品質へのコミットメントを示す。<br />   + 言語がエンタープライズの懸念と共鳴：「受け入れられないリスク」「エンタープライズグレード」「信頼を与える」。<br /><br />全体として、文書は明確性とエンタープライズ整合性で優れている。実行可能性は強いが、「次のステップ」セクションを追加することでA+に引き上げることができる。技術的な深さと明確な説明の組み合わせにより、技術的および非技術的なリーダーシップの両方に非常に効果的。素晴らしい仕事！ |
  </Accordion>
</AccordionGroup>

***

<CardGroup cols={3}>
  <Card title="プロンプトライブラリ" icon="link" href="/ja/prompt-library/library">
    様々なタスクやユースケースのための厳選されたプロンプトで着想を得ましょう。
  </Card>

  <Card title="GitHubプロンプティングチュートリアル" icon="link" href="https://github.com/anthropics/prompt-eng-interactive-tutorial">
    当社のドキュメントにあるプロンプトエンジニアリングの概念をカバーする例が豊富なチュートリアル。
  </Card>

  <Card title="Google Sheetsプロンプティングチュートリアル" icon="link" href="https://docs.google.com/spreadsheets/d/19jzLgRruG9kjUQNKtCg1ZjdD6l6weA6qRXG5zLIAhC8">
    インタラクティブなスプレッドシートを通じた、当社のプロンプトエンジニアリングチュートリアルの軽量版。
  </Card>
</CardGroup>

# 長文コンテキストのプロンプト作成のヒント

<Note>
  While these tips apply broadly to all Claude models, you can find prompting tips specific to extended thinking models [here](/en/docs/build-with-claude/prompt-engineering/extended-thinking-tips).
</Note>

Claudeの拡張コンテキストウィンドウ（Claude 3モデルでは200Kトークン）により、複雑でデータ豊富なタスクを処理することができます。このガイドでは、この機能を効果的に活用する方法を説明します。

## 長文コンテキストのプロンプトに関する重要なヒント

* **長文データを上部に配置**: 長文の文書や入力（約20K以上のトークン）をプロンプトの上部、クエリや指示、例の上に配置します。これにより、すべてのモデルにおいてClaudeのパフォーマンスが大幅に向上します。

  <Note>特に複雑な複数文書の入力の場合、クエリを最後に配置することで、応答の品質が最大30%向上することがテストで示されています。</Note>

* **XMLタグを使用して文書のコンテンツとメタデータを構造化**: 複数の文書を使用する場合、各文書を`<document>`タグで囲み、`<document_content>`と`<source>`（およびその他のメタデータ）のサブタグを使用して明確にします。

  <Accordion title="複数文書構造の例">
    ```xml
    <documents>
      <document index="1">
        <source>annual_report_2023.pdf</source>
        <document_content>
          {{ANNUAL_REPORT}}
        </document_content>
      </document>
      <document index="2">
        <source>competitor_analysis_q2.xlsx</source>
        <document_content>
          {{COMPETITOR_ANALYSIS}}
        </document_content>
      </document>
    </documents>

    年次報告書と競合分析を分析し、戦略的優位性を特定してQ3の重点分野を推奨してください。
    ```
  </Accordion>

* **引用を使用して応答の根拠を示す**: 長文文書のタスクでは、タスクを実行する前に、Claudeに関連する文書の部分を引用するよう依頼します。これにより、Claudeは文書の残りの「ノイズ」を切り分けることができます。

  <Accordion title="引用抽出の例">
    ```xml
    あなたはAI医師アシスタントです。医師が患者の病気を診断するのを支援することがあなたの任務です。

    <documents>
      <document index="1">
        <source>patient_symptoms.txt</source>
        <document_content>
          {{PATIENT_SYMPTOMS}}
        </document_content>
      </document>
      <document index="2">
        <source>patient_records.txt</source>
        <document_content>
          {{PATIENT_RECORDS}}
        </document_content>
      </document>
      <document index="3">
        <source>patient01_appt_history.txt</source>
        <document_content>
          {{PATIENT01_APPOINTMENT_HISTORY}}
        </document_content>
      </document>
    </documents>

    患者の報告された症状の診断に関連する患者記録と予約履歴からの引用を見つけてください。これらを<quotes>タグ内に配置してください。次に、これらの引用に基づいて、医師が患者の症状を診断するのに役立つすべての情報をリストアップしてください。診断情報を<info>タグ内に配置してください。
    ```
  </Accordion>

***

<CardGroup cols={3}>
  <Card title="プロンプトライブラリ" icon="link" href="/ja/prompt-library/library">
    様々なタスクやユースケースのために厳選されたプロンプトで着想を得ましょう。
  </Card>

  <Card title="GitHubプロンプト作成チュートリアル" icon="link" href="https://github.com/anthropics/prompt-eng-interactive-tutorial">
    当社のドキュメントに記載されているプロンプトエンジニアリングの概念を網羅した、例が豊富なチュートリアルです。
  </Card>

  <Card title="Google Sheetsプロンプト作成チュートリアル" icon="link" href="https://docs.google.com/spreadsheets/d/19jzLgRruG9kjUQNKtCg1ZjdD6l6weA6qRXG5zLIAhC8">
    インタラクティブなスプレッドシートを通じた、より軽量版のプロンプトエンジニアリングチュートリアルです。
  </Card>
</CardGroup>
